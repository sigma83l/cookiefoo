// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  user
  admin
}

model User {
  id                    Int                     @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  email                 String    
  phone                 String
  role                  Role                    @default(user)
  orders                Order[]
  hashedPassword        String
  createdAt             DateTime                @default(now())
  updatedAt             DateTime                @updatedAt            
  hashedRT              String?
  lastLoggedInTime      DateTime?
}

model Product {
  id                    Int                     @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  description           String    
  ingredients           String[]                @default(["unknown"])
  price                 BigInt                  @default(0)
  orders                Order[]
  files                 File[]
  createdAt             DateTime                @default(now())
  updatedAt             DateTime                @updatedAt
}

model Order {
  id                    Int                     @id @default(autoincrement())
  productId             Int
  customerId            Int      
  amount                Float
  customer              User                    @relation(fields: [customerId], references: [id])
  product               Product                 @relation(fields: [productId], references: [id])            
}

model Verification {
  id                    Int                     @id @default(autoincrement())
  email                 String                  @unique
  try                   Int                     @default(0)
  code                  String
  lastResendTime        DateTime
}

model File {
  id                Int                @id @default(autoincrement())
  title             String
  description       String
  fileName          String
  isVerified        Boolean            @default(false)
  productId         Int               
  createdAt         DateTime
  updatedAt         DateTime
  size              Int                @default(0)
  type              String             @default("")
  numberOfDisLikes  Int                @default(0)
  product           Product            @relation(fields:[productId], references: [id])
}